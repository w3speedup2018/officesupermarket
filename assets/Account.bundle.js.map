{"version":3,"sources":["webpack:///./source/scripts/templates/Account.js","webpack:///./source/scripts/helpers/Quantity.js","webpack:///./source/scripts/Forms.js"],"names":["Account","$accountContents","$","$loginContent","$addressesContent","$addressButtonFocus","_loginToggle","bind","length","_initLoginPage","_initAddressPage","_init","Forms","$loginToggle","find","$login","$recovery","$recoveryHasMessage","on","event","preventDefault","toggleClass","$customerAddresses","$target","currentTarget","itemId","attr","removeClass","addClass","eq","focus","target","Shopify","CustomerAddress","destroy","each","i","el","id","countryEl","provinceEl","options","hideElement","CountryProvinceSelector","Quantity","$el","$inputParent","$input","$selectParent","$select","_watchSelect","_watchInput","off","baseValue","parseInt","value","isNaN","_validateValue","val","trigger","removeAttr","select","selector","filledClass","fieldSelector","quantityItems","$quantityWrapper","_toggleFilled","_checkFilled","push","forEach","quantityItem","unload","hasClass","isFilled","is","e"],"mappings":"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","file":"Account.bundle.js","sourcesContent":["import $ from 'jquery';\n\nimport Forms from '../Forms';\n\nexport default class Account {\n  constructor() {\n    this.$accountContents = $('[data-template-account]');\n    this.$loginContent = $('[data-template-account-login]');\n    this.$addressesContent = $('[data-template-account-addresses]');\n    this.$addressButtonFocus = null;\n\n    this._loginToggle = this._loginToggle.bind(this);\n\n    if (this.$loginContent.length) {\n      this._initLoginPage();\n    }\n\n    if (this.$addressesContent.length) {\n      this._initAddressPage();\n    }\n\n    if (this.$accountContents.length) {\n      this._init();\n    }\n  }\n\n  _init() {\n    new Forms(this.$accountContents);\n  }\n\n  _initLoginPage() {\n    this.$loginToggle = this.$loginContent.find('[data-login-toggle]');\n    this.$login = this.$loginContent.find('[data-account-login-main]');\n    this.$recovery = this.$loginContent.find('[data-account-login-recovery]');\n    this.$recoveryHasMessage = this.$recovery.find('[data-recovery-has-message]');\n\n    this.$loginToggle.on('click', this._loginToggle);\n\n    if (this.$recoveryHasMessage.length) {\n      this._loginToggle();\n    }\n  }\n\n  _loginToggle(event = null) {\n    if (event) {\n      event.preventDefault();\n    }\n\n    this.$login.toggleClass('visible');\n    this.$recovery.toggleClass('visible');\n  }\n\n  _initAddressPage() {\n    const $customerAddresses = this.$addressesContent.find('[data-address-id]');\n\n    this.$addressesContent.on('click', '[data-edit-address]', event => {\n      const $target = $(event.currentTarget);\n      const itemId = $target.attr('data-edit-address');\n\n      $customerAddresses.removeClass('visible');\n      this.$addressButtonFocus = $target;\n\n      $(`[data-address-id=\"${itemId}\"]`)\n        .addClass('visible')\n        .find('.form-field-input')\n        .eq(0)\n        .focus();\n    });\n\n    this.$addressesContent.on('click', '[data-edit-address-cancel]', () => {\n      $customerAddresses.removeClass('visible');\n      $('[data-address-id=\"new\"]').addClass('visible');\n\n      // Return focus to last used button\n      this.$addressButtonFocus.focus();\n      this.$addressButtonFocus = null;\n    });\n\n    this.$addressesContent.on('click', '[data-delete-address]', event => {\n      const itemId = $(event.target).attr('data-delete-address');\n      Shopify.CustomerAddress.destroy(itemId, '');\n    });\n\n    $customerAddresses.each((i, el) => {\n      const id = $(el).attr('data-address-id');\n\n      const countryEl = `customer_addr_${id}_country`;\n      const provinceEl = `customer_addr_${id}_province`;\n      const options = { hideElement: `address_province_container_${id}` };\n\n      // Initiate provinces for address forms\n      new Shopify.CountryProvinceSelector(countryEl, provinceEl, options);\n    });\n  }\n}\n","export default class Quantity {\n  constructor(el) {\n    this.$el = $(el);\n    this.$inputParent = this.$el.find('.form-field--qty-input');\n    this.$input = this.$el.find('[data-quantity-input]');\n    this.$selectParent = this.$el.find('.form-field--qty-select');\n    this.$select = this.$el.find('[data-quantity-select]');\n\n    this._watchSelect = this._watchSelect.bind(this);\n    this._watchInput = this._watchInput.bind(this);\n\n    this.$select.on('change.quantity', this._watchSelect);\n    this.$input.on('change.quantity', this._watchInput);\n  }\n\n  unload() {\n    this.$el.off('.quantity');\n  }\n\n  _validateValue(event) {\n    const baseValue = parseInt(event.currentTarget.value, 10);\n\n    return isNaN(baseValue) ? 1 : baseValue;\n  }\n\n  _watchSelect(event) {\n    const value = this._validateValue(event);\n\n    // Update input to match select\n    this.$input.val(value).trigger('change');\n\n    // Switch to quantity input when 10 or more\n    if (value >= 10) {\n      this.$inputParent\n        .removeClass('hidden')\n        .addClass('visible');\n\n      this.$input\n        .focus()\n        .removeAttr('tabindex')\n        .select();\n\n      this.$selectParent\n        .removeClass('visible')\n        .addClass('hidden');\n\n      this.$select.attr('tabindex', '-1');\n    }\n  }\n\n  _watchInput(event) {\n    this.$input.val(this._validateValue(event));\n  }\n}\n","import $ from 'jquery';\nimport Quantity from './helpers/Quantity';\n\nexport default class Forms {\n  constructor(el, selector = '.form-field-input') {\n    this.$el = $(el);\n    this.filledClass = 'form-field-filled';\n    this.fieldSelector = selector;\n\n    this.quantityItems = [];\n    this.$quantityWrapper = this.$el.find('[data-quantity-wrapper]');\n\n    this._toggleFilled = this._toggleFilled.bind(this);\n    this.$el.on('focus.forms', this.fieldSelector, this._toggleFilled);\n    this.$el.on('blur.forms', this.fieldSelector, this._toggleFilled);\n\n    this._checkFilled();\n\n    if (this.$quantityWrapper.length) {\n      this.$quantityWrapper.each((i, el) => {\n        this.quantityItems.push(\n          new Quantity(el),\n        );\n      });\n    }\n  }\n\n  unload() {\n    this.$el.off('.forms');\n\n    this.quantityItems.forEach(quantityItem => {\n      quantityItem.unload();\n    });\n  }\n\n  _checkFilled() {\n    this.$el.find(this.fieldSelector).each((i, el) => {\n      if ($(el).hasClass(this.filledClass)) return;\n\n      this._toggleFilled(null, el);\n    });\n  }\n\n  _toggleFilled(event = null, el = false) {\n    const target = event ? event.currentTarget : el;\n    const $target = $(target);\n    const { value } = target;\n\n    let isFilled = value.length > 0;\n\n    try {\n      isFilled = isFilled || $target.is(':-webkit-autofill');\n      $target.toggleClass(this.filledClass, isFilled);\n    } catch (e) {\n      $target.toggleClass(this.filledClass, isFilled);\n    }\n  }\n}\n"],"sourceRoot":""}